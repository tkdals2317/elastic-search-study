엘라스틱서치는 아파치의 루씬 라이브러리를 기반으로 만든 분산 검색 엔진이다.

2013년에는 엘라스틱서치의 **데이터를 손쉽게 시각화하는 키바나(Kibana)** 와 엘라스틱서치에 **색인 할 데이터를 수집하고 변환하는 로그스태시(Logstash)** 프로젝트가 엘라스틱에 합류했다.

엘라스틱서치와 이들을 합쳐 ELK 스택이라고 부른다.

ELK 스택을 이용하여 데이터의 수집부터 변환, 저장, 색인, 검색, 시각화까지 데이터 생명 주기 전체를 모두 엘라스틱의 솔루션으로 해결할 수 있어 큰 주목을 받았다.

현재는 **경량 데이터 수집 플랫폼인 비츠(Beats)**가 합류하면서 현재의 엘라스틱 서치가 완성됬다.

엘라스틱서치가 검색 엔진에서 각광받고 있는 시스템인 이유는 다음과 같다.

- 분산처리
- 고가용성
- 수평적 확장
- 데이터 수집과 시각화를 위한 플랫폼 구축까지 엘라스틱 스택 내에서 한번에 소화 가능

JSON 기반의 문서를 저장, 색인, 검색하기에 분산 NoSQL 스토리지의 성격도 가지고 있다. MongoDB와 함께 NoSQL 분야에서도 인기가 좋다.

강력한 전문 검색 기능을 탑재한 NoSQL 스토리지로서의 포지셔닝은 엘라스틱서치의 차별점이다.

## 1.1 엘라스틱서치의 기본 콘셉트

루씬은 데이터를 색인하고 검색하는 기능을 제공하는 검색 엔진의 코어 라이브러리다.

엘라스틱서치는 루씬을 코어로 이용하여 JSON 문서의 저장, 색인, 검색 등의 작업을 분산 처리하는 검색엔진이다.

### 엘라스틱서치의 강점

- **검색 엔진**

다른 RDBMS와 경쟁 NoSQL에 비해 매우 강력한 검색 기능을 지원한다.

단순한 텍스트 매칭 검색이 아닌 본격적인 전문 검색(full-text search)이 가능하며 다양한 종류의 검색 쿼리를 지원한다.

검색 엔진이기 때문에 **역색인을 사용하여 검색 속도도 매우 빠르다.**

다양한 애널라이저를 조합하여 여럴 비즈니스 요구사항에 맞는 색인을 구성할 수 있고 형태소 분석도 가능하다.

- **분산 처리**

엘라스틱서치는 분산 처리를 고려하여 설계됐다. 데이터를 여러 노드에 분산 저장하며 검색이나 집계 작업 등을 수행할 때도 분산 처리를 지원한다.

- **고가용성 제공**

엘라스틱서치는 고가용성(High Availability)을 제공한다.

클러스터를 구성하고 있는 일부 노드에 장애가 발생해도 복제본 데이터를 이용해 중단 없이 서비스를 지속할 수 있다.

이때 엘라스틱서치는 다시 복제본을 만들어 복제본의 개수를 유지하면서 노드 간 데이터의 균형을 자동으로 맞춘다.

- **수평적 확장성**

서비스를 운영하다 보면 요청 수나 데이터의 양이 증가하여 더 많은 처리 능력이 요구되는 때가 생긴다. 엘라스틱서치는 이런 상황을 대비해 수평적 확장을 지원한다.

새로운 노드에 엘라스틱서치를 설치하여 클러스터에 참여시키는 것만으로도 확장이 된다.

새 노드에 데이터를 복제하거나 옮기는 작업도 엘라스틱서치가 자동 수행한다.

- **JSON 기반의 REST API 제공**

엘라스틱서치는 JSON 형태의 문서를 저장, 색인, 검색한다.

엘라스틱서치에 작업 요청을 보내도 JSON 기반의 REST API를 사용한다.

특별한 클라이언트의 사전 설치 없이도 환경에 구애받지 않고 HTTP를 통해 쉽게 이요할 수 있다.

- **데이터 안전성**

높은 안전성을 제공, 데이터 색인 요청 후 200 OK를 받았다면 그 데이터는 확실히 디스크에 기록된다.

- **다양한 플러그인을 통한 기능 확장 지원**

다양한 서드파티 플러그인을 통해 핵심 기능을 제어하고, 비즈니스 요구사항에 맞게 커스터마이즈 할 수 있다.

- **준실시간 검색**

엘라스틱서치는 준실시간 검색(near real-time search)을 지원한다.

데이터를 색인하자마자 조회하는 것은 가능하지만, 데이터 색인 직후의 검색 요청은 성공하지 못할 가능성이 높다. 엘라스틱서치가 역색인을 구성하고 이 역색인으로부터 검색이 가능해지기까지 시간이 걸리기 때문이다.

기본 설정으로 엘라스틱 서치를 운여할 경우 최대 1초 정도 시간이 걸린다.

- **트랜잭션이 지원되지 않음**

RDBMS와 다르게 트랜잭션을 지원하지 않아 서비스와 데이터 설계 시 이점을 고려해야 한다.

- **사실상 조인을 지원하지 않음**

엘라스틱 서치는 기본적으로 조인을 염두에 두고 설계되지 않았다. join이라는 특별한 데이터 타입이 있지만 이는 굉장히 제한적인 상황을 위한 기능이며 성능도 떨어진다.

기본적올 RDBMS와는 다르게 데이터를 비정규화해야한다.

조인은 아예 사용하지 않는다고 생각하자